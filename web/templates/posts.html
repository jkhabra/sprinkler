{% extends "layout.html" %}
{% block container %}

<div class='container'>
  <h1 class='header'>Today's Posts</h1>
  <ul class='post-list'>
    {% for post in posts %}

    <li class ="post"">

      <div class="title-container">
        <h2 class="post-title">
          {{post.Post.title}}
        </h2>
      </div>
      <div class="thumb">
        <div class='spinner' style='display:none'></div>
        <p class='error' style='display:none'>Could not publish post. Sorry</p>
        <p class='success' style='display:none'>Your post successfully posted to Facebook</p>
        {% if post.Image.local_url.endswith('.mp4') %}
        <video class="post-image" autoplay='autoplay' loop muted>
          <source src={{post.Image.local_url}} type="video/mp4">
          Your browser does not support the video tag.
        </video>
        {% else %}
        <img class='post-image' src='{{post.Image.local_url}}' alt='post_image'>
        {%endif%}
      </div>
          <button type="button" class="publish-button" data-photo-id={{post.Image.local_url.split('/')[-1]}} >Publish</button>
      {% endfor %}
    </li>
  </ul>
</div>

<script src='/static/script.js'></script>

{% endblock %}
